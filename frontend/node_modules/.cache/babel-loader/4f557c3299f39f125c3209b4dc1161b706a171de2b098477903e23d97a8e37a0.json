{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import\"./Chat.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Chat=_ref=>{let{socket,roomId,username}=_ref;const[messages,setMessages]=useState([]);const[input,setInput]=useState(\"\");const messagesEndRef=useRef(null);useEffect(()=>{if(!socket)return;const handleNewMessage=message=>{setMessages(prev=>[...prev,message]);};socket.on(\"chatMessage\",handleNewMessage);return()=>{socket.off(\"chatMessage\",handleNewMessage);};},[socket]);useEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});},[messages]);const sendMessage=()=>{if(input.trim()===\"\")return;socket.emit(\"chatMessage\",{roomId,username,message:input.trim()});setInput(\"\");};const handleKeyDown=e=>{if(e.key===\"Enter\"&&!e.shiftKey){e.preventDefault();sendMessage();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"chat-header\",children:\"Chat\"}),/*#__PURE__*/_jsx(\"div\",{className:\"blue-strip\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-messages\",children:[messages.map((msg,idx)=>{const isOwn=msg.username===username;return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-message \".concat(isOwn?\"own\":\"other\"),children:[!isOwn&&/*#__PURE__*/_jsx(\"div\",{className:\"chat-username\",children:msg.username}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-bubble\",children:msg.message})]},idx);}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-input-container\",children:[/*#__PURE__*/_jsx(\"textarea\",{rows:2,value:input,onChange:e=>setInput(e.target.value),onKeyDown:handleKeyDown,placeholder:\"Type a message...\",className:\"chat-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,className:\"chat-send-button\",children:\"Send\"})]})]});};export default Chat;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","Chat","_ref","socket","roomId","username","messages","setMessages","input","setInput","messagesEndRef","handleNewMessage","message","prev","on","off","_messagesEndRef$curre","current","scrollIntoView","behavior","sendMessage","trim","emit","handleKeyDown","e","key","shiftKey","preventDefault","className","children","map","msg","idx","isOwn","concat","ref","rows","value","onChange","target","onKeyDown","placeholder","onClick"],"sources":["C:/Users/krishan kant/Desktop/Js/game/frontend/src/components/Chat.js"],"sourcesContent":["\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport \"./Chat.css\";\r\n\r\nconst Chat = ({ socket, roomId, username }) => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const messagesEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!socket) return;\r\n\r\n    const handleNewMessage = (message) => {\r\n      setMessages((prev) => [...prev, message]);\r\n    };\r\n\r\n    socket.on(\"chatMessage\", handleNewMessage);\r\n\r\n    return () => {\r\n      socket.off(\"chatMessage\", handleNewMessage);\r\n    };\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  const sendMessage = () => {\r\n    if (input.trim() === \"\") return;\r\n    socket.emit(\"chatMessage\", { roomId, username, message: input.trim() });\r\n    setInput(\"\");\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat-container\">\r\n      <h3 className=\"chat-header\">Chat</h3>\r\n      <div className=\"blue-strip\"></div>\r\n      <div className=\"chat-messages\">\r\n        {messages.map((msg, idx) => {\r\n          const isOwn = msg.username === username;\r\n          return (\r\n            <div key={idx} className={`chat-message ${isOwn ? \"own\" : \"other\"}`}>\r\n              {!isOwn && <div className=\"chat-username\">{msg.username}</div>}\r\n              <div className=\"chat-bubble\">{msg.message}</div>\r\n            </div>\r\n          );\r\n        })}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n      <div className=\"chat-input-container\">\r\n        <textarea\r\n          rows={2}\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyDown={handleKeyDown}\r\n          placeholder=\"Type a message...\"\r\n          className=\"chat-input\"\r\n        />\r\n        <button onClick={sendMessage} className=\"chat-send-button\">\r\n          Send\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}